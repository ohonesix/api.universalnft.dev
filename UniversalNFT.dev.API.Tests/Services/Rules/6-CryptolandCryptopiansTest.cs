using NSubstitute;

namespace UniversalNFT.dev.API.Tests.Services.Rules
{
    public class CryptolandCryptopiansTest : BaseRuleTest
    {
        [Test]
        public async Task GivenNFT_ReturnsImageAsync()
        {
            // Arrange
            Token.URI = TestConstants.MetaJsonUrl;

            var metaJson = @"{""schema"": ""https://ingameassets.cryptoland.host/cryptopian/cryptopian.v1.schema.json"", ""nftType"": ""art.v0"", ""name"": ""Cryptopian #21"", ""nftId"": ""21"", ""description"": ""This is a member of the Cryptopian society on Planet CryCor. They are the remenants of the original clones that were sent to colonize the planet.  They all are in a race for power and control to Own. Earn. and Conquer."", ""image"": """ + TestConstants.DirectImageUrl + @""", ""animation"": ""https://community-cryptoland-2.nyc3.cdn.digitaloceanspaces.com/upload/cryptopian/animation/unrevealed-cryptopian.gif"", ""video"": ""https://community-cryptoland-2.nyc3.cdn.digitaloceanspaces.com/upload/cryptopian/video/unrevealed-cryptopian.mp4"", ""audio"": ""https://community-cryptoland-2.nyc3.cdn.digitaloceanspaces.com/upload/cryptopian/audio/unrevealed-cryptopian.mp3"", ""file"": ""https://community-cryptoland-2.nyc3.cdn.digitaloceanspaces.com/upload/cryptopian/file/unrevealed-cryptopian.html"", ""collection"": {""name"": ""Cryptoland Cryptopians"", ""family"": ""Avatars""}, ""attributes"": [{""trait_type"": ""Sex"", ""value"": ""Unrevealed""}, {""trait_type"": ""Class"", ""value"": ""Unrevealed""}, {""trait_type"": ""Subclass"", ""value"": ""Unrevealed""}, {""trait_type"": ""Background"", ""value"": ""Unrevealed""}, {""trait_type"": ""Border"", ""value"": ""Unrevealed""}, {""trait_type"": ""Skin Color"", ""value"": ""Unrevealed""}, {""trait_type"": ""Eye Base"", ""value"": ""Unrevealed""}, {""trait_type"": ""Iris Color"", ""value"": ""Unrevealed""}, {""trait_type"": ""Mouth Expression"", ""value"": ""Unrevealed""}, {""trait_type"": ""Brow Expression"", ""value"": ""Unrevealed""}, {""trait_type"": ""Tattoo"", ""value"": ""Unrevealed""}, {""trait_type"": ""Burn Scar"", ""value"": ""Unrevealed""}, {""trait_type"": ""Warpaint"", ""value"": ""Unrevealed""}, {""trait_type"": ""Scars"", ""value"": ""Unrevealed""}, {""trait_type"": ""Hair Style"", ""value"": ""Unrevealed""}, {""trait_type"": ""Hair Color"", ""value"": ""Unrevealed""}, {""trait_type"": ""Beard Style"", ""value"": ""Unrevealed""}, {""trait_type"": ""Beard Color"", ""value"": ""Unrevealed""}, {""trait_type"": ""Flame Brows"", ""value"": ""Unrevealed""}, {""trait_type"": ""Hat"", ""value"": ""Unrevealed""}, {""trait_type"": ""Accessory"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 1"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 2"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 3"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 4"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 5"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 6"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 7"", ""value"": ""Unrevealed""}, {""trait_type"": ""Clothing 8"", ""value"": ""Unrevealed""}, {""trait_type"": ""Necklaces"", ""value"": ""Unrevealed""}, {""trait_type"": ""Nose Rings"", ""value"": ""Unrevealed""}, {""trait_type"": ""Level"", ""value"": ""Unrevealed""}, {""trait_type"": ""Health Points"", ""value"": ""Unrevealed""}, {""trait_type"": ""Attack Points"", ""value"": ""Unrevealed""}, {""trait_type"": ""Defense Points"", ""value"": ""Unrevealed""}, {""trait_type"": ""Mining"", ""value"": ""Unrevealed""}, {""trait_type"": ""Thieving"", ""value"": ""Unrevealed""}, {""trait_type"": ""Forging"", ""value"": ""Unrevealed""}, {""trait_type"": ""Raiding"", ""value"": ""Unrevealed""}, {""trait_type"": ""Fabricating"", ""value"": ""Unrevealed""}, {""trait_type"": ""Governing"", ""value"": ""Unrevealed""}, {""trait_type"": ""Ruling"", ""value"": ""Unrevealed""}, {""trait_type"": ""Collect Tithes"", ""value"": ""Unrevealed""}, {""trait_type"": ""Can Use Vials"", ""value"": ""Unrevealed""}, {""trait_type"": ""Helmet"", ""value"": ""Unrevealed""}, {""trait_type"": ""Breastplate"", ""value"": ""Unrevealed""}, {""trait_type"": ""Gauntlet"", ""value"": ""Unrevealed""}, {""trait_type"": ""Boots"", ""value"": ""Unrevealed""}, {""trait_type"": ""Mainhand Weapon"", ""value"": ""Unrevealed""}, {""trait_type"": ""Offhand Weapon"", ""value"": ""Unrevealed""}], ""additional"": null, ""issuer"": ""rPeRQQ8kaMej5b1E7tjkwFPm2xMFQofkdG"", ""network"": ""XLS20""}";

            _mockHttpFacade.GetData(TestConstants.MetaJsonUrl).Returns(metaJson);

            // Act
            var result = await _classUnderTest.ProcessNFToken(Token);

            // Assert
            Assert.That(result, Is.EqualTo(TestConstants.DirectImageUrl));
        }
    }
}